<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PondPilot Widget - Relative Path Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
        }
        h2 {
            color: #666;
            margin-top: 40px;
        }
        .test-case {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        pre {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 4px;
            overflow-x: auto;
        }
        code {
            font-family: 'SF Mono', Monaco, Consolas, 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>PondPilot Widget - Relative Path Test</h1>
    
    <div class="instructions">
        <h3>Test Instructions:</h3>
        <ol>
            <li>Create a test parquet file named <code>analytics.parquet</code></li>
            <li>Start a local web server in this directory: <code>python3 -m http.server 8080</code></li>
            <li>Open this page at <code>http://localhost:8080/test-relative-paths.html</code></li>
            <li>Click "Run" on each test case to verify relative path handling</li>
        </ol>
    </div>

    <h2>Test 1: Relative path without quotes</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT COUNT(*) FROM analytics.parquet</code></pre>
    </div>

    <h2>Test 2: Relative path with single quotes</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT COUNT(*) FROM 'analytics.parquet'</code></pre>
    </div>

    <h2>Test 3: Relative path with leading slash</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT COUNT(*) FROM '/analytics.parquet'</code></pre>
    </div>

    <h2>Test 4: Relative path with dot-slash</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT COUNT(*) FROM './analytics.parquet'</code></pre>
    </div>

    <h2>Test 5: Full HTTP URL (should work as before)</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT COUNT(*) FROM 'http://localhost:8080/analytics.parquet'</code></pre>
    </div>

    <h2>Test 6: Multiple files in one query</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT 
    (SELECT COUNT(*) FROM 'analytics.parquet') as relative_count,
    (SELECT COUNT(*) FROM 'http://localhost:8080/analytics.parquet') as absolute_count</code></pre>
    </div>

    <h2>Test 7: Complex query with JOIN</h2>
    <div class="test-case">
        <pre class="pondpilot-snippet"><code class="language-sql">SELECT * 
FROM 'analytics.parquet' a
JOIN './analytics.parquet' b ON 1=1
LIMIT 5</code></pre>
    </div>

    <!-- Load the widget -->
    <script src="dist/pondpilot-widget.js"></script>
    <script>
        // Widget will auto-initialize
        console.log('PondPilot Widget loaded and initialized');
    </script>
</body>
</html>